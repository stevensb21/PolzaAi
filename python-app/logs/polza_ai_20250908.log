2025-09-08 17:18:49 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: main
2025-09-08 17:19:03 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: handle_message
  –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ('–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û',)
2025-09-08 17:19:04 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: ceo_dispatcher
  –ê—Ä–≥—É–º–µ–Ω—Ç—ã: [{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}]
2025-09-08 17:19:05 | INFO     | logger.py:89 | ‚ÑπÔ∏è ceo_dispatcher, decision: order
2025-09-08 17:19:05 | INFO     | logger.py:89 | ‚ÑπÔ∏è ceo_dispatcher, decision –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ type_of_request: order, 
2025-09-08 17:19:05 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: connect_dispatcher –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É
  –ü–ë–û'}], [{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}])
2025-09-08 17:19:05 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: order_dispatcher –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}],
  [{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}])
2025-09-08 17:19:05 | DEBUG    | logger.py:85 | üîç chat_history: [] messages: [{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}]
2025-09-08 17:19:05 | INFO     | logger.py:89 | ‚ÑπÔ∏è –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –∫ –ò–ò (—Å–æ–æ–±—â–µ–Ω–∏–π: 1)
2025-09-08 17:19:05 | DEBUG    | logger.py:85 | üîç –û—Ç–ø—Ä–∞–≤–ª—è—é 2 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ API
2025-09-08 17:19:05 | DEBUG    | logger.py:85 | üîç 
  –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {'role': 'system', 'content': '\n –¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∑–∞–∫–∞–∑–∞ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–π.\n\n
  –í–ê–ñ–ù–û: –¢—ã –î–û–õ–ñ–ï–ù –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–º!\n –£ —Ç–µ–±—è –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞:
  [{"role": "user", "content": "–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û"}]. \n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç: \'–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É
  –ü–ë–û\'. \n –¢–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏, –∫–∞–∫–æ–π –∑–∞–∫–∞–∑ —É—Ç–æ—á–Ω—è–µ—Ç—Å—è, –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ order_data.\n\n –£
  —Ç–µ–±—è –µ—Å—Ç—å 2 —Ñ—É–Ω–∫—Ü–∏–∏:\n 1. makeOrderFormat(employee_name, certificate_name) ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ
  –∑–∞–∫–∞–∑–∞\n 2. clarification(order_data) ‚Äî —É—Ç–æ—á–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞\n\n –ü–†–ê–í–ò–õ–ê:\n - –í–ê–ñ–ù–û: –ï—Å–ª–∏ –≤
  –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –µ—Å—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ...", "–ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ...") –∏
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –∏–ª–∏ —Ç–µ–∫—Å—Ç ‚Üí —ç—Ç–æ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –æ—Ç–≤–µ—Ç –Ω–∞ —É—Ç–æ—á–Ω–µ–Ω–∏–µ, –≤—ã–∑—ã–≤–∞–π
  clarification()\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ü–û–õ–ù–´–ï –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–§–ò–û, –°–ù–ò–õ–°, –ò–ù–ù,
  —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å) –∏ –ø—Ä–æ—Å–∏—Ç —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ ‚Üí –≤—ã–∑—ã–≤–∞–π makeOrderFormat()\n - –ï—Å–ª–∏
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–º–æ–Ω—Ç–∞–∂–Ω–∏–∫" –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏) ‚Üí –≤—ã–∑—ã–≤–∞–π
  clarification() —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ç–æ—á–Ω—è–µ—Ç –¥–µ—Ç–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
  –∑–∞–∫–∞–∑–∞ ‚Üí –≤—ã–∑—ã–≤–∞–π clarification()\n - –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–≤–µ—á–∞–π –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º, –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—É–Ω–∫—Ü–∏–∏!\n
  \n **–ü–†–ò–û–†–ò–¢–ï–¢:** –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –í–ê–ñ–ù–ï–ï –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏!\n\n - –ï—Å–ª–∏
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –°–î–ï–õ–ê–¢–¨ –ù–û–í–´–ô –ó–ê–ö–ê–ó ‚Üí –≤—ã–∑—ã–≤–∞–π makeOrderFormat().\n ‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω–∏ JSON –≤
  —Ñ–æ—Ä–º–∞—Ç–µ:\n {\n "employee_name": "–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",\n "certificate_name": ["–ù–∞–∑–≤–∞–Ω–∏–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è"]\n
  }\n ‚Ä¢ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Å—Å–∏–≤ –¥–ª—è certificate_name, –¥–∞–∂–µ –µ—Å–ª–∏ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –æ–¥–Ω–æ.\n\n - –ï—Å–ª–∏
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ç–æ—á–Ω—è–µ—Ç –¥–µ—Ç–∞–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∞ –µ—â—ë –¥–æ–±–∞–≤—å –ü–ë–û", "–Ω–µ –ï–≥–æ—Ä–æ–≤, –∞
  –ï–≥–æ—Ä–æ–≤ –ò–≤–∞–Ω", "–Ω—É–∂–Ω–æ 2 —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è") ‚Üí –≤—ã–∑—ã–≤–∞–π clarification().\n ‚Ä¢ –í clarification() –≤—Å–µ–≥–¥–∞
  –ø–µ—Ä–µ–¥–∞–≤–∞–π:\n - messages ‚Üí —Ç–µ–∫—Å—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n - order_data ‚Üí JSON –∑–∞–∫–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ
  —É—Ç–æ—á–Ω–∏—Ç—å (–ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –≤ chat_history —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∫–∞–∫–æ–π –∑–∞–∫–∞–∑ –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å) –¢–µ–±–µ
  –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é\n –∑–∞–∫–∞–∑ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –≤–∏–¥–µ json –ø—Ä–∏–º–µ—Ä–Ω–æ –≤–æ—Ç —Ç–∞–∫
  {\'type\': \'–ü–†–ò–ú–ï–†\', \'employee\': {\'full_name\': \'–ü–†–ò–ú–ï–†\', \'snils\': \'–ü–†–ò–ú–ï–†\', \'inn\':
  \'–ü–†–ò–ú–ï–†\', \'position\': None, \'birth_date\': \'–ü–†–ò–ú–ï–†\', \'phone\': \'–ü–†–ò–ú–ï–†\'}, \'certificate\':
  [\'–ü–†–ò–ú–ï–†\'], \'status\': \'–ü–†–ò–ú–ï–†\', \'message\': \'–ü–†–ò–ú–ï–†\'}\n - –ñ–ï–°–¢–ö–û–ï –ü–†–ê–í–ò–õ–û: –æ—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ
  JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –°–î–ï–õ–ê–¢–¨ –ù–û–í–´–ô –ó–ê–ö–ê–ó ‚Üí –≤—ã–∑—ã–≤–∞–π makeOrderFormat().\n
  –ü—Ä–∏–º–µ—Ä—ã:\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–∞–±–∏—Ä–æ–≤ –†—É—Å—Ç–µ–º, –°–ù–ò–õ–° 195-071-028-66, –Ω—É–∂–Ω–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã"\n –û—Ç–≤–µ—Ç:
  makeOrderFormat({"employee_name": "–°–∞–±–∏—Ä–æ–≤ –†—É—Å—Ç–µ–º –†–∞—Ñ–∏—Å–æ–≤–∏—á", "certificate_name": ["—É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ
  –≤—ã—Å–æ—Ç—ã"]})\n\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–∑–∞–∫–∞–∑–∞—Ç—å –ï–≥–æ—Ä–æ–≤—É –≠–ë"\n –û—Ç–≤–µ—Ç: makeOrderFormat({"employee_name":
  "–ï–≥–æ—Ä–æ–≤", "certificate_name": ["–≠–ë"]})\n\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–∏ –µ—â—ë –¥–æ–±–∞–≤—å –ë–°–ò–ó"\n –û—Ç–≤–µ—Ç:
  clarification(messages="–∏ –µ—â—ë –¥–æ–±–∞–≤—å –ë–°–ò–ó", order_data={"employee_name": "–ï–≥–æ—Ä–æ–≤",
  "certificate_name": ["–≠–ë"]})\n\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–º–æ–Ω—Ç–∞–∂–Ω–∏–∫" (–æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏)\n –û—Ç–≤–µ—Ç:
  clarification(messages="–º–æ–Ω—Ç–∞–∂–Ω–∏–∫", order_data={"employee_name": "–°–∞–±–∏—Ä–æ–≤ –†—É—Å—Ç–µ–º –†–∞—Ñ–∏—Å–æ–≤–∏—á",
  "certificate_name": ["–æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –ª–µ—Å–∞—Ö"]})\n\n –í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Å—Å–∏–≤ –¥–ª—è
  certificate_name, –¥–∞–∂–µ –µ—Å–ª–∏ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –æ–¥–Ω–æ!\n '}
2025-09-08 17:19:05 | DEBUG    | logger.py:85 | üîç –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}
2025-09-08 17:19:07 | INFO     | logger.py:89 | ‚ÑπÔ∏è –û—Ç–≤–µ—Ç –ò–ò: 
2025-09-08 17:19:07 | INFO     | logger.py:89 | ‚ÑπÔ∏è –ò–ò —Ö–æ—á–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: 1
2025-09-08 17:19:07 | INFO     | logger.py:89 | ‚ÑπÔ∏è –í—ã–∑—ã–≤–∞—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: makeOrderFormat
2025-09-08 17:19:07 | DEBUG    | logger.py:85 | üîç employee_name: –º–æ—Ä–¥–∞—Å—É, certificate_name: ['–ü–ë–û']
2025-09-08 17:19:07 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: makeOrderFormat –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}],
  '–º–æ—Ä–¥–∞—Å—É', ['–ü–ë–û'])
2025-09-08 17:19:07 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: sort_employee
  –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ('–º–æ—Ä–¥–∞—Å—É',)
2025-09-08 17:19:07 | INFO     | logger.py:113 | üîç –ò—â—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É: '–º–æ—Ä–¥–∞—Å—É'
2025-09-08 17:19:07 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: call_external_api
2025-09-08 17:19:07 | INFO     | logger.py:125 | üåê –í—ã–ø–æ–ª–Ω—è—é –∑–∞–ø—Ä–æ—Å –∫ API: http://labor.tetrakom-crm-miniapp.ru/api/people
2025-09-08 17:19:07 | INFO     | logger.py:125 | üåê API –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, –ø–æ–ª—É—á–µ–Ω–æ 32384 —Å–∏–º–≤–æ–ª–æ–≤
2025-09-08 17:19:07 | DEBUG    | logger.py:80 | ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ call_external_api
  –†–µ–∑—É–ª—å—Ç–∞—Ç: 3
2025-09-08 17:19:48 | INFO     | logger.py:105 | ‚úÖ 
  –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: { "data": { "id": 2, "full_name": "–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á",
  "position": "–ø—Ä–æ—Ä–∞–±", "phone": "186-767-625-40", "snils": "22222222222", "inn":
  "23333333333333333333", "birth_date": "1991-01-01T00:00:00.000000Z", "all_certificates": [ { "id":
  2, "name": "–í–ò–¢–† (–û–¢)", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 1, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": true,
  "assigned_data": { "assigned_date": "2000-01-01", "certificate_number": "–í –æ–∂–∏–¥–∞–Ω–∏–∏", "status": 2,
  "notes": null } }, { "id": 3, "name": "–ü–ë–û", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": true, "assigned_data": { "assigned_date": "2000-01-01", "certificate_number": "–í
  –æ–∂–∏–¥–∞–Ω–∏–∏", "status": 2, "notes": null } }, { "id": 4, "name": "–ê–ë–ì", "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id": 5, "name":
  "–ü–µ—Ä–≤–∞—è –ü–æ–º–æ—â—å", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 6, "name": "–ü–ë–ò", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 7, "name": "–≠–ë", "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "expiry_date": 1, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id": 8, "name": "–í–õ
  (–û–¢)", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z",
  "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id":
  9, "name": "5.9.3", "description": null, "expiry_date": 3, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 10, "name": "5.9.4", "description": null, "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 11, "name": "–õ—é–ª—å–∫–∏", "description":
  "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id": 12, "name":
  "5.1.9", "description": null, "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z",
  "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id":
  13, "name": "5.1.10", "description": null, "expiry_date": 3, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 14, "name": "5.1.11", "description": null, "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 15, "name": "–í—ã—Å–æ—Ç–∞(—Ä–∞–±–æ—á–∞—è, 2–≥—Ä)",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z",
  "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id":
  16, "name": "–í—ã—Å–æ—Ç–∞(–ò–¢–†, 3–≥—Ä)", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 5, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 17, "name": "–ë–°–ò–ó", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 1, "name": "A1", "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "expiry_date": 5, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-27T10:40:33.000000Z", "is_assigned": false, "assigned_data": null } ] } }
2025-09-08 17:19:48 | INFO     | logger.py:105 | ‚úÖ –ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω
2025-09-08 17:19:48 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ sort_employee –†–µ–∑—É–ª—å—Ç–∞—Ç: { "data": { "id": 2, "full_name": "–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", "pos... (–æ–±—Ä–µ–∑–∞–Ω–æ)
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç sort_employee –≤–µ—Ä–Ω—É–ª: <class 'str'>
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç 
  –°–æ–¥–µ—Ä–∂–∏–º–æ–µ json_people: { "data": { "id": 2, "full_name": "–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á",
  "position": "–ø—Ä–æ—Ä–∞–±", "phone": "186-767-625-40", "snils": "22222222222", "inn":
  "23333333333333333333", "birth_date": "1991-01-01T00:00:00.000000Z", "all_certificates": [ { "id":
  2, "name": "–í–ò–¢–† (–û–¢)", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 1, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": true,
  "assigned_data": { "assigned_date": "2000-01-01", "certificate_number": "–í –æ–∂–∏–¥–∞–Ω–∏–∏", "status": 2,
  "notes": null } }, { "id": 3, "name": "–ü–ë–û", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": true, "assigned_data": { "assigned_date": "2000-01-01", "certificate_number": "–í
  –æ–∂–∏–¥–∞–Ω–∏–∏", "status": 2, "notes": null } }, { "id": 4, "name": "–ê–ë–ì", "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id": 5, "name":
  "–ü–µ—Ä–≤–∞—è –ü–æ–º–æ—â—å", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 6, "name": "–ü–ë–ò", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 7, "name": "–≠–ë", "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "expiry_date": 1, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id": 8, "name": "–í–õ
  (–û–¢)", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z",
  "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id":
  9, "name": "5.9.3", "description": null, "expiry_date": 3, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 10, "name": "5.9.4", "description": null, "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 11, "name": "–õ—é–ª—å–∫–∏", "description":
  "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id": 12, "name":
  "5.1.9", "description": null, "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z",
  "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id":
  13, "name": "5.1.10", "description": null, "expiry_date": 3, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 14, "name": "5.1.11", "description": null, "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 15, "name": "–í—ã—Å–æ—Ç–∞(—Ä–∞–±–æ—á–∞—è, 2–≥—Ä)",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3, "created_at": "2025-08-25T12:47:45.000000Z",
  "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false, "assigned_data": null }, { "id":
  16, "name": "–í—ã—Å–æ—Ç–∞(–ò–¢–†, 3–≥—Ä)", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 5, "created_at":
  "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z", "is_assigned": false,
  "assigned_data": null }, { "id": 17, "name": "–ë–°–ò–ó", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "expiry_date": 3,
  "created_at": "2025-08-25T12:47:45.000000Z", "updated_at": "2025-08-25T12:47:45.000000Z",
  "is_assigned": false, "assigned_data": null }, { "id": 1, "name": "A1", "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "expiry_date": 5, "created_at": "2025-08-25T12:47:45.000000Z", "updated_at":
  "2025-08-27T10:40:33.000000Z", "is_assigned": false, "assigned_data": null } ] } }
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: <class 'dict'>
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç data type: <class 'dict'>, length: not list
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç 
  Extracted from data dict: –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á, 22222222222, 23333333333333333333, photo:
  null
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç 
  –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π order_json: {'type': 'clarification', 'employee': {'id': 2, 'full_name': '–ú–æ—Ä–¥–∞—Å
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á', 'snils': '22222222222', 'inn': '23333333333333333333', 'position':
  '–ø—Ä–æ—Ä–∞–±', 'birth_date': '1991-01-01T00:00:00.000000Z', 'phone': '186-767-625-40', 'photo': 'null'},
  'certificate': ['–ü–ë–û'], 'status': 'pending'}
2025-09-08 17:19:48 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ makeOrderFormat –†–µ–∑—É–ª—å—Ç–∞—Ç: {'type': 'clarification', 'employee': {'id': 2,
  'full_name': '–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á', 'snils': '22222222222', 'inn':
  '23333333333333333333', 'position': '–ø—Ä–æ—Ä–∞–±', 'birth_date': '1991-01-01T00:00:00.000000Z', 'phone':
  '186-767-625-40', 'photo': 'null'}, 'certificate': ['–ü–ë–û'], 'status': 'pending'}
2025-09-08 17:19:48 | DEBUG    | logger.py:85 | üîç 
  result makeOrderFormat from order_dispatcher: {'type': 'clarification', 'employee': {'id': 2,
  'full_name': '–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á', 'snils': '22222222222', 'inn':
  '23333333333333333333', 'position': '–ø—Ä–æ—Ä–∞–±', 'birth_date': '1991-01-01T00:00:00.000000Z', 'phone':
  '186-767-625-40', 'photo': 'null'}, 'certificate': ['–ü–ë–û'], 'status': 'pending'}
2025-09-08 17:19:48 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: clarification –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–∑–∞–∫–∞–∂–∏ –º–æ—Ä–¥–∞—Å—É –ü–ë–û'}],
  {'type': 'clarification', 'employee': {'id': 2, 'full_name': '–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á',
  'snils': '22222222222', 'inn': '23333333333333333333', 'position': '–ø—Ä–æ—Ä–∞–±', 'birth_date':
  '1991-01-01T00:00:00.000000Z', 'phone': '186-767-625-40', 'photo': 'null'}, 'certificate': ['–ü–ë–û'],
  'status': 'pending'})
2025-09-08 17:19:53 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –û—Ç–≤–µ—Ç –ò–ò clarification: { "type": "clarification", "employee": { "id": 2, "full_name": "–ú–æ—Ä–¥–∞—Å
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", "snils": "22222222222", "inn": "23333333333333333333", "position":
  "–ø—Ä–æ—Ä–∞–±", "birth_date": "1991-01-01T00:00:00.000000Z", "phone": "186-767-625-40", "photo": "null" },
  "certificate": [ "–ü–ë–û" ], "status": "pending", "message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á." }
2025-09-08 17:19:53 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ clarification –†–µ–∑—É–ª—å—Ç–∞—Ç: { "type": "clarification", "employee": { "id": 2,
  "full_name": "–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω... (–æ–±—Ä–µ–∑–∞–Ω–æ)
2025-09-08 17:19:53 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ order_dispatcher –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.
2025-09-08 17:19:53 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ connect_dispatcher –†–µ–∑—É–ª—å—Ç–∞—Ç: {'type': 'orderclar', 'message': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,
  –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.', 'chat_history_order': '[\n {\n
  "role": "assistant",\n "content": "{\\"type\\": \\"clarification\\", \\"employee\\": {\\"id\\": 2,
  \\"full_name\\": \\"–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á\\", \\"snils\\": \\"22222222222\\", \\"inn\\":
  \\"23333333333333333333\\", \\"position\\": \\"–ø—Ä–æ—Ä–∞–±\\", \\"birth_date\\":
  \\"1991-01-01T00:00:00.000000Z\\", \\"phone\\": \\"186-767-625-40\\", \\"photo\\": \\"null\\"},
  \\"certificate\\": [\\"–ü–ë–û\\"], \\"status\\": \\"pending\\", \\"message\\": \\"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,
  –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.\\"}"\n }\n]'}
2025-09-08 17:19:53 | DEBUG    | logger.py:80 | ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ handle_message
  –†–µ–∑—É–ª—å—Ç–∞—Ç: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
2025-09-08 17:20:03 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: handle_photo_with_text –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([<telebot.types.PhotoSize object at
  0x000002B6FB1A5FD0>, <telebot.types.PhotoSize object at 0x000002B6FB214550>,
  <telebot.types.PhotoSize object at 0x000002B6FB214690>, <telebot.types.PhotoSize object at
  0x000002B6FB0B10F0>], None)
2025-09-08 17:20:05 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –ü–æ–ª—É—á–µ–Ω–æ —Ñ–æ—Ç–æ:
  https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg
2025-09-08 17:20:05 | DEBUG    | logger.py:80 | ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ handle_photo_with_text
  –†–µ–∑—É–ª—å—Ç–∞—Ç: –§–æ—Ç–æ —Å —Ç–µ–∫—Å—Ç–æ–º —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
2025-09-08 17:20:15 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: handle_message
  –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ('–º–æ—Ä–¥–∞—Å—É –ü–ë–û',)
2025-09-08 17:20:16 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ:
  https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg
2025-09-08 17:20:16 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: ceo_dispatcher –ê—Ä–≥—É–º–µ–Ω—Ç—ã: [{'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}]
2025-09-08 17:20:18 | INFO     | logger.py:89 | ‚ÑπÔ∏è ceo_dispatcher, decision: order
2025-09-08 17:20:18 | INFO     | logger.py:89 | ‚ÑπÔ∏è ceo_dispatcher, decision –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ type_of_request: order, orderclar
2025-09-08 17:20:18 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: connect_dispatcher –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û',
  'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}],
  [{'role': 'assistant', 'content': '[\n {\n "role": "assistant",\n "content": "{\\"type\\":
  \\"clarification\\", \\"employee\\": {\\"id\\": 2, \\"full_name\\": \\"–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á\\", \\"snils\\": \\"22222222222\\", \\"inn\\": \\"23333333333333333333\\",
  \\"position\\": \\"–ø—Ä–æ—Ä–∞–±\\", \\"birth_date\\": \\"1991-01-01T00:00:00.000000Z\\", \\"phone\\":
  \\"186-767-625-40\\", \\"photo\\": \\"null\\"}, \\"certificate\\": [\\"–ü–ë–û\\"], \\"status\\":
  \\"pending\\", \\"message\\": \\"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.\\"}"\n }\n]'}, {'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}])
2025-09-08 17:20:18 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: order_dispatcher –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}],
  [{'role': 'assistant', 'content': '[\n {\n "role": "assistant",\n "content": "{\\"type\\":
  \\"clarification\\", \\"employee\\": {\\"id\\": 2, \\"full_name\\": \\"–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á\\", \\"snils\\": \\"22222222222\\", \\"inn\\": \\"23333333333333333333\\",
  \\"position\\": \\"–ø—Ä–æ—Ä–∞–±\\", \\"birth_date\\": \\"1991-01-01T00:00:00.000000Z\\", \\"phone\\":
  \\"186-767-625-40\\", \\"photo\\": \\"null\\"}, \\"certificate\\": [\\"–ü–ë–û\\"], \\"status\\":
  \\"pending\\", \\"message\\": \\"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.\\"}"\n }\n]'}, {'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}])
2025-09-08 17:20:18 | DEBUG    | logger.py:85 | üîç 
  chat_history: [] messages: [{'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}]
2025-09-08 17:20:18 | INFO     | logger.py:89 | ‚ÑπÔ∏è –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –∫ –ò–ò (—Å–æ–æ–±—â–µ–Ω–∏–π: 1)
2025-09-08 17:20:18 | DEBUG    | logger.py:85 | üîç –û—Ç–ø—Ä–∞–≤–ª—è—é 2 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ API
2025-09-08 17:20:18 | DEBUG    | logger.py:85 | üîç 
  –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {'role': 'system', 'content': '\n –¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∑–∞–∫–∞–∑–∞ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–π.\n\n
  –í–ê–ñ–ù–û: –¢—ã –î–û–õ–ñ–ï–ù –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–º!\n –£ —Ç–µ–±—è –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞:
  [{"role": "assistant", "content": "[\\n {\\n \\"role\\": \\"assistant\\",\\n \\"content\\":
  \\"{\\\\\\"type\\\\\\": \\\\\\"clarification\\\\\\", \\\\\\"employee\\\\\\": {\\\\\\"id\\\\\\": 2,
  \\\\\\"full_name\\\\\\": \\\\\\"–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á\\\\\\", \\\\\\"snils\\\\\\":
  \\\\\\"22222222222\\\\\\", \\\\\\"inn\\\\\\": \\\\\\"23333333333333333333\\\\\\",
  \\\\\\"position\\\\\\": \\\\\\"–ø—Ä–æ—Ä–∞–±\\\\\\", \\\\\\"birth_date\\\\\\":
  \\\\\\"1991-01-01T00:00:00.000000Z\\\\\\", \\\\\\"phone\\\\\\": \\\\\\"186-767-625-40\\\\\\",
  \\\\\\"photo\\\\\\": \\\\\\"null\\\\\\"}, \\\\\\"certificate\\\\\\": [\\\\\\"–ü–ë–û\\\\\\"],
  \\\\\\"status\\\\\\": \\\\\\"pending\\\\\\", \\\\\\"message\\\\\\": \\\\\\"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ
  —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.\\\\\\"}\\"\\n }\\n]"}, {"role": "user", "content":
  "–º–æ—Ä–¥–∞—Å—É –ü–ë–û", "photo":
  "https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg"}].
  \n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç: \'–º–æ—Ä–¥–∞—Å—É –ü–ë–û\'. \n –¢–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏, –∫–∞–∫–æ–π –∑–∞–∫–∞–∑ —É—Ç–æ—á–Ω—è–µ—Ç—Å—è,
  –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ order_data.\n\n –£ —Ç–µ–±—è –µ—Å—Ç—å 2 —Ñ—É–Ω–∫—Ü–∏–∏:\n 1. makeOrderFormat(employee_name,
  certificate_name) ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞\n 2. clarification(order_data) ‚Äî —É—Ç–æ—á–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  –∑–∞–∫–∞–∑–∞\n\n –ü–†–ê–í–ò–õ–ê:\n - –í–ê–ñ–ù–û: –ï—Å–ª–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –µ—Å—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,
  —É–∫–∞–∂–∏—Ç–µ...", "–ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ...") –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –∏–ª–∏ —Ç–µ–∫—Å—Ç ‚Üí —ç—Ç–æ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  –æ—Ç–≤–µ—Ç –Ω–∞ —É—Ç–æ—á–Ω–µ–Ω–∏–µ, –≤—ã–∑—ã–≤–∞–π clarification()\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ü–û–õ–ù–´–ï –¥–∞–Ω–Ω—ã–µ
  —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–§–ò–û, –°–ù–ò–õ–°, –ò–ù–ù, —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å) –∏ –ø—Ä–æ—Å–∏—Ç —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ ‚Üí –≤—ã–∑—ã–≤–∞–π
  makeOrderFormat()\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–º–æ–Ω—Ç–∞–∂–Ω–∏–∫" –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ
  –¥–æ–ª–∂–Ω–æ—Å—Ç–∏) ‚Üí –≤—ã–∑—ã–≤–∞–π clarification() —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ç–æ—á–Ω—è–µ—Ç
  –¥–µ—Ç–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ ‚Üí –≤—ã–∑—ã–≤–∞–π clarification()\n - –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–≤–µ—á–∞–π –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º, –í–°–ï–ì–î–ê
  –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—É–Ω–∫—Ü–∏–∏!\n \n **–ü–†–ò–û–†–ò–¢–ï–¢:** –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –í–ê–ñ–ù–ï–ï –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º
  —Å–æ–æ–±—â–µ–Ω–∏–∏!\n\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –°–î–ï–õ–ê–¢–¨ –ù–û–í–´–ô –ó–ê–ö–ê–ó ‚Üí –≤—ã–∑—ã–≤–∞–π makeOrderFormat().\n ‚Ä¢
  –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω–∏ JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n {\n "employee_name": "–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",\n "certificate_name":
  ["–ù–∞–∑–≤–∞–Ω–∏–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è"]\n }\n ‚Ä¢ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Å—Å–∏–≤ –¥–ª—è certificate_name, –¥–∞–∂–µ –µ—Å–ª–∏
  —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –æ–¥–Ω–æ.\n\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ç–æ—á–Ω—è–µ—Ç –¥–µ—Ç–∞–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∞
  –µ—â—ë –¥–æ–±–∞–≤—å –ü–ë–û", "–Ω–µ –ï–≥–æ—Ä–æ–≤, –∞ –ï–≥–æ—Ä–æ–≤ –ò–≤–∞–Ω", "–Ω—É–∂–Ω–æ 2 —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è") ‚Üí –≤—ã–∑—ã–≤–∞–π clarification().\n ‚Ä¢
  –í clarification() –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–π:\n - messages ‚Üí —Ç–µ–∫—Å—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n - order_data ‚Üí
  JSON –∑–∞–∫–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å (–ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –≤ chat_history —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∫–∞–∫–æ–π –∑–∞–∫–∞–∑
  –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å) –¢–µ–±–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é\n –∑–∞–∫–∞–∑ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –≤–∏–¥–µ
  json –ø—Ä–∏–º–µ—Ä–Ω–æ –≤–æ—Ç —Ç–∞–∫ {\'type\': \'–ü–†–ò–ú–ï–†\', \'employee\': {\'full_name\': \'–ü–†–ò–ú–ï–†\', \'snils\':
  \'–ü–†–ò–ú–ï–†\', \'inn\': \'–ü–†–ò–ú–ï–†\', \'position\': None, \'birth_date\': \'–ü–†–ò–ú–ï–†\', \'phone\':
  \'–ü–†–ò–ú–ï–†\'}, \'certificate\': [\'–ü–†–ò–ú–ï–†\'], \'status\': \'–ü–†–ò–ú–ï–†\', \'message\': \'–ü–†–ò–ú–ï–†\'}\n -
  –ñ–ï–°–¢–ö–û–ï –ü–†–ê–í–ò–õ–û: –æ—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n\n - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –°–î–ï–õ–ê–¢–¨ –ù–û–í–´–ô –ó–ê–ö–ê–ó ‚Üí
  –≤—ã–∑—ã–≤–∞–π makeOrderFormat().\n –ü—Ä–∏–º–µ—Ä—ã:\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–∞–±–∏—Ä–æ–≤ –†—É—Å—Ç–µ–º, –°–ù–ò–õ–° 195-071-028-66, –Ω—É–∂–Ω–æ
  —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã"\n –û—Ç–≤–µ—Ç: makeOrderFormat({"employee_name": "–°–∞–±–∏—Ä–æ–≤ –†—É—Å—Ç–µ–º –†–∞—Ñ–∏—Å–æ–≤–∏—á",
  "certificate_name": ["—É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã"]})\n\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–∑–∞–∫–∞–∑–∞—Ç—å –ï–≥–æ—Ä–æ–≤—É –≠–ë"\n –û—Ç–≤–µ—Ç:
  makeOrderFormat({"employee_name": "–ï–≥–æ—Ä–æ–≤", "certificate_name": ["–≠–ë"]})\n\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–∏ –µ—â—ë
  –¥–æ–±–∞–≤—å –ë–°–ò–ó"\n –û—Ç–≤–µ—Ç: clarification(messages="–∏ –µ—â—ë –¥–æ–±–∞–≤—å –ë–°–ò–ó", order_data={"employee_name":
  "–ï–≥–æ—Ä–æ–≤", "certificate_name": ["–≠–ë"]})\n\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–º–æ–Ω—Ç–∞–∂–Ω–∏–∫" (–æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏)\n
  –û—Ç–≤–µ—Ç: clarification(messages="–º–æ–Ω—Ç–∞–∂–Ω–∏–∫", order_data={"employee_name": "–°–∞–±–∏—Ä–æ–≤ –†—É—Å—Ç–µ–º –†–∞—Ñ–∏—Å–æ–≤–∏—á",
  "certificate_name": ["–æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –ª–µ—Å–∞—Ö"]})\n\n –í–ê–ñ–ù–û: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –º–∞—Å—Å–∏–≤ –¥–ª—è
  certificate_name, –¥–∞–∂–µ –µ—Å–ª–∏ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –æ–¥–Ω–æ!\n '}
2025-09-08 17:20:18 | DEBUG    | logger.py:85 | üîç 
  –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}
2025-09-08 17:20:22 | INFO     | logger.py:89 | ‚ÑπÔ∏è –û—Ç–≤–µ—Ç –ò–ò: 
2025-09-08 17:20:22 | INFO     | logger.py:89 | ‚ÑπÔ∏è –ò–ò —Ö–æ—á–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: 1
2025-09-08 17:20:22 | INFO     | logger.py:89 | ‚ÑπÔ∏è –í—ã–∑—ã–≤–∞—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: clarification
2025-09-08 17:20:22 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –ê—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è clarification:
  Function(arguments='{"order_data":{"type":"clarification","employee":{"id":2,"full_name":"–ú–æ—Ä–¥–∞—Å
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á","snils":"22222222222","inn":"23333333333333333333","position":"–ø—Ä–æ—Ä–∞–±","birth_date":"1991-01-01T00:00:00.000000Z","phone":"186-767-625-40","photo":"null"},"certificate":["–ü–ë–û"],"status":"pending","message":"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,
  –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á."}}', name='clarification')
2025-09-08 17:20:22 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: clarification –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ([{'role': 'user', 'content': '–º–æ—Ä–¥–∞—Å—É –ü–ë–û', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'}],
  {'type': 'clarification', 'employee': {'id': 2, 'full_name': '–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á',
  'snils': '22222222222', 'inn': '23333333333333333333', 'position': '–ø—Ä–æ—Ä–∞–±', 'birth_date':
  '1991-01-01T00:00:00.000000Z', 'phone': '186-767-625-40', 'photo': 'null'}, 'certificate': ['–ü–ë–û'],
  'status': 'pending', 'message': '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á.'})
2025-09-08 17:20:22 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ç–æ –≤ –∑–∞–∫–∞–∑:
  https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg
2025-09-08 17:20:26 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –û—Ç–≤–µ—Ç –ò–ò clarification: { "type": "readyorder", "employee": { "id": 2, "full_name": "–ú–æ—Ä–¥–∞—Å
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", "snils": "22222222222", "inn": "23333333333333333333", "position":
  "–ø—Ä–æ—Ä–∞–±", "birth_date": "1991-01-01T00:00:00.000000Z", "phone": "186-767-625-40", "photo":
  "https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg"
  }, "certificate": [ "–ü–ë–û" ], "status": "existing_employee_with_photo", "message": "" }
2025-09-08 17:20:26 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ clarification –†–µ–∑—É–ª—å—Ç–∞—Ç: { "type": "readyorder", "employee": { "id": 2,
  "full_name": "–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ... (–æ–±—Ä–µ–∑–∞–Ω–æ)
2025-09-08 17:20:26 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: updateEmployeeData –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ({'type': 'readyorder', 'employee': {'id': 2,
  'full_name': '–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á', 'snils': '22222222222', 'inn':
  '23333333333333333333', 'position': '–ø—Ä–æ—Ä–∞–±', 'birth_date': '1991-01-01T00:00:00.000000Z', 'phone':
  '186-767-625-40', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'},
  'certificate': ['–ü–ë–û'], 'status': 'existing_employee_with_photo', 'message': ''},)
2025-09-08 17:20:26 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:
  https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg
2025-09-08 17:20:27 | INFO     | logger.py:89 | ‚ÑπÔ∏è –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 126186 –±–∞–π—Ç
2025-09-08 17:20:27 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –û–±–Ω–æ–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ ID 2: { "full_name": "–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", "position":
  "–ø—Ä–æ—Ä–∞–±", "phone": "186-767-625-40", "snils": "22222222222", "inn": "23333333333333333333",
  "birth_date": "1991-01-01T00:00:00.000000Z", "status": "–í –æ–∂–∏–¥–∞–Ω–∏–∏" }
2025-09-08 17:20:28 | INFO     | logger.py:105 | ‚úÖ ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
2025-09-08 17:20:28 | DEBUG    | logger.py:80 | ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ updateEmployeeData
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
2025-09-08 17:20:28 | DEBUG    | logger.py:66 | 
  üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: updatePerson –ê—Ä–≥—É–º–µ–Ω—Ç—ã: ({'type': 'readyorder', 'employee': {'id': 2, 'full_name':
  '–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á', 'snils': '22222222222', 'inn': '23333333333333333333', 'position':
  '–ø—Ä–æ—Ä–∞–±', 'birth_date': '1991-01-01T00:00:00.000000Z', 'phone': '186-767-625-40', 'photo':
  'https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg'},
  'certificate': ['–ü–ë–û'], 'status': 'existing_employee_with_photo', 'message': ''},)
2025-09-08 17:20:28 | DEBUG    | logger.py:66 | üöÄ –í—Ö–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é: parsAllCertificates
2025-09-08 17:20:28 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –ü–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤: {'success': True, 'data': [{'id': 2, 'name': '–í–ò–¢–† (–û–¢)', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 1}, {'id': 3, 'name': '–ü–ë–û', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 4, 'name': '–ê–ë–ì', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 5, 'name': '–ü–µ—Ä–≤–∞—è –ü–æ–º–æ—â—å', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 6, 'name': '–ü–ë–ò', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 7, 'name': '–≠–ë', 'description': '–û–ø–∏—Å–∞–Ω–∏–µ',
  'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at': '2025-08-25T12:47:45.000000Z',
  'expiry_date': 1}, {'id': 8, 'name': '–í–õ (–û–¢)', 'description': '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at':
  '2025-08-25T12:47:45.000000Z', 'updated_at': '2025-08-25T12:47:45.000000Z', 'expiry_date': 3},
  {'id': 9, 'name': '5.9.3', 'description': None, 'created_at': '2025-08-25T12:47:45.000000Z',
  'updated_at': '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 10, 'name': '5.9.4',
  'description': None, 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 11, 'name': '–õ—é–ª—å–∫–∏', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 12, 'name': '5.1.9', 'description': None,
  'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at': '2025-08-25T12:47:45.000000Z',
  'expiry_date': 3}, {'id': 13, 'name': '5.1.10', 'description': None, 'created_at':
  '2025-08-25T12:47:45.000000Z', 'updated_at': '2025-08-25T12:47:45.000000Z', 'expiry_date': 3},
  {'id': 14, 'name': '5.1.11', 'description': None, 'created_at': '2025-08-25T12:47:45.000000Z',
  'updated_at': '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 15, 'name': '–í—ã—Å–æ—Ç–∞(—Ä–∞–±–æ—á–∞—è,
  2–≥—Ä)', 'description': '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 16, 'name': '–í—ã—Å–æ—Ç–∞(–ò–¢–†, 3–≥—Ä)',
  'description': '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 5}, {'id': 17, 'name': '–ë–°–ò–ó', 'description':
  '–û–ø–∏—Å–∞–Ω–∏–µ', 'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at':
  '2025-08-25T12:47:45.000000Z', 'expiry_date': 3}, {'id': 1, 'name': 'A1', 'description': '–û–ø–∏—Å–∞–Ω–∏–µ',
  'created_at': '2025-08-25T12:47:45.000000Z', 'updated_at': '2025-08-27T10:40:33.000000Z',
  'expiry_date': 5}], 'pagination': {'current_page': 1, 'last_page': 1, 'per_page': 20, 'total': 17}}
2025-09-08 17:20:28 | INFO     | logger.py:89 | ‚ÑπÔ∏è –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –∫ –ò–ò –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
2025-09-08 17:20:30 | INFO     | logger.py:89 | ‚ÑπÔ∏è –û—Ç–≤–µ—Ç –ò–ò: {"–ü–ë–û": 3}
2025-09-08 17:20:30 | INFO     | logger.py:89 | ‚ÑπÔ∏è –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ ID —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤: [3]
2025-09-08 17:20:30 | DEBUG    | logger.py:80 | ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ parsAllCertificates
  –†–µ–∑—É–ª—å—Ç–∞—Ç: [3]
2025-09-08 17:20:30 | INFO     | logger.py:89 | ‚ÑπÔ∏è –ü–∞—Ä—Å–∏–º –≤—Å–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã: [3]
2025-09-08 17:20:30 | INFO     | logger.py:89 | ‚ÑπÔ∏è 
  –û—Ç–ø—Ä–∞–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ –≤ API: { "people_id": 2, "certificate_id": 3, "assigned_date": "2000-01-01",
  "certificate_number": "–í –æ–∂–∏–¥–∞–Ω–∏–∏" }
2025-09-08 17:20:30 | ERROR    | logger.py:97 | ‚ùå 
  –û—à–∏–±–∫–∞ API –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ 3: 422 -
  {"success":false,"message":"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442
  \u0443\u0436\u0435 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a
  \u044d\u0442\u043e\u043c\u0443 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0443"}
2025-09-08 17:20:30 | INFO     | logger.py:105 | ‚úÖ –í—Å–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á
2025-09-08 17:20:30 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ updatePerson –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á
2025-09-08 17:20:30 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ order_dispatcher –†–µ–∑—É–ª—å—Ç–∞—Ç: –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ú–æ—Ä–¥–∞—Å
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á —Å —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ–º ['... (–æ–±—Ä–µ–∑–∞–Ω–æ)
2025-09-08 17:20:30 | DEBUG    | logger.py:80 | 
  ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ connect_dispatcher –†–µ–∑—É–ª—å—Ç–∞—Ç: {'type': 'orderready', 'message': " –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω
  –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö \n –¥–ª—è –ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á \n —Å —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ–º ['–ü–ë–û']\n \n
  –°–ù–ò–õ–°: 22222222222 \n –ò–ù–ù: 23333333333333333333 \n –î–æ–ª–∂–Ω–æ—Å—Ç—å: –ø—Ä–æ—Ä–∞–± \n –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: 01.01.1991 \n
  –¢–µ–ª–µ—Ñ–æ–Ω: 186-767-625-40 ", 'chat_history_order': '[\n {\n "role": "assistant",\n "content":
  "{\\"type\\": \\"readyorder\\", \\"employee\\": {\\"id\\": 2, \\"full_name\\": \\"–ú–æ—Ä–¥–∞—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á\\", \\"snils\\": \\"22222222222\\", \\"inn\\": \\"23333333333333333333\\",
  \\"position\\": \\"–ø—Ä–æ—Ä–∞–±\\", \\"birth_date\\": \\"1991-01-01T00:00:00.000000Z\\", \\"phone\\":
  \\"186-767-625-40\\", \\"photo\\":
  \\"https://api.telegram.org/file/bot7934916395:AAFKUivVycRo_sf2azOv4oJUVaslRJ1j1YU/photos/file_0.jpg\\"},
  \\"certificate\\": [\\"–ü–ë–û\\"], \\"status\\": \\"existing_employee_with_photo\\", \\"message\\":
  \\"\\"}"\n }\n]'}
2025-09-08 17:20:30 | DEBUG    | logger.py:80 | ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ handle_message
  –†–µ–∑—É–ª—å—Ç–∞—Ç: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
